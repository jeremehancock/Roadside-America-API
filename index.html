<!DOCTYPE html>
<html lang="en">

<head>
    <title>Roadside America API</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Roadside America API">
    <meta name="twitter:image"
        content="https://roadside-america.dumbprojects.com/images/roadside-america-twitter.jpg" />
    <meta property="og:title" content="Roadside America API" />
    <meta property="og:type" content="website" />
    <meta property="og:description"
        content="Free to Use and Reuse: John Margolies Roadside America Photograph Archive" />
    <meta property="og:url" content="https://roadside-america.dumbprojects.com" />
    <meta property="og:image" content="https://roadside-america.dumbprojects.com/images/roadside-america.jpg" />
    <meta property="og:site_name" content="roadside-america.dumbprojects.com" />
    <link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
    <link rel="manifest" href="images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png">
    <link href="https://fonts.googleapis.com/css?family=Karla:400,700" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="mobile-menu">
        <a href="#"><i class="fa fa-navicon"></i></a>
    </div>
    <div class="vertical-nav">
        <h1>Roadside America API</h1>
        <ul>
            <li><a href="https://www.loc.gov/free-to-use/john-margolies-roadside-america-photograph-archive"
                    target="_blank"><i class="fa fa-book"></i> &nbsp;Library Of Congress Gallery</a></li>
            <li><a href="https://www.flickr.com/photos/library_of_congress/albums/72157686396348231" target="_blank"><i
                        class="fa fa-flickr"></i> &nbsp;Flickr Gallery</a></li>
            <li><a href="https://roadside-america.dumbprojects.com/demo/" target="_blank"><i class="fa fa-globe"></i>
                    &nbsp;Demo
                    Site</a></li>
            <li><a href="https://github.com/mhancoc7/Roadside-America-API" target="_blank"><i class="fa fa-github"></i>
                    &nbsp;View on
                    GitHub</a></li>
        </ul>
        <span class="logo"><img src="images/roadside-america.jpg" alt="Roadside America"
                style="max-width: 100%; margin-bottom: 1.5em;" /></span>
        <ul>
            <li>Powered By: <a href="https://www.loc.gov/free-to-use/"><img class="powered-by"
                        src="images/logo-loc-new-branding.svg" alt="Library of Congress" /></a></li>
        </ul>
    </div>
    <div id="main-content" class="api-side home">
        <h1 class="mobile-h1">Roadside America API</h1>
        <h2 class="title">Free to Use and Reuse: John Margolies Roadside America Photograph Archive</h2>
        <p>Take a journey along U.S. main streets, byways, and highways through photographs taken by John Margolies
            between 1969 and 2008.</p>
        <div class="code-wrapper">
            <pre class="code">https://roadside-america.dumbprojects.com/api</pre>
            <a href='#' class='get-image button'>Submit</a>
        </div>
        <div class="try">
            <div class="image">
                <div class="image-content"></div>
            </div>

            <div class="json">
                <pre></pre>
            </div>
        </div>

    </div>

    <div id="social">
        <a href="https://dumbprojects.com" target="_blank"
            style="display: inline-block; padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 5px; font-weight: bold; font-family: 'Karla', sans-serif; transition: transform 0.2s;">
            More Dumb Projects
        </a>
    </div>

    <script>
        // Add hover effect to the link
        document.querySelector('#social a').addEventListener('mouseenter', function () {
            this.style.transform = 'scale(1.05)';
        });
        document.querySelector('#social a').addEventListener('mouseleave', function () {
            this.style.transform = 'scale(1)';
        });

        // Fetch and display image data
        function getImage() {
            // Show loading indicator
            const imageContent = document.querySelector(".image-content");
            const jsonPre = document.querySelector(".json pre");

            imageContent.innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><div class="loading-text">Loading image...</div></div>';
            jsonPre.textContent = 'Loading data...';

            fetch("api/index.php")
                .then(response => {
                    if (!response.ok) {
                        throw new Error('API request failed with status ' + response.status);
                    }
                    return response.text();
                })
                .then(text => {
                    // Try to parse as JSON
                    let data;
                    try {
                        data = JSON.parse(text);
                    } catch (e) {
                        console.error('Invalid JSON response:', text.substring(0, 200));
                        throw new Error('API returned invalid JSON. Check that api/index.php exists and is working properly.');
                    }

                    jsonPre.textContent = JSON.stringify(data, null, 4);

                    // Create image element and wait for it to load before displaying
                    const img = new Image();
                    img.onload = function () {
                        imageContent.innerHTML = "<img src='" + data.results.images.large + "' alt='Roadside America Photo'>";
                    };
                    img.onerror = function () {
                        imageContent.innerHTML = '<div class="loading-text">Error loading image</div>';
                    };
                    img.src = data.results.images.large;
                })
                .catch(error => {
                    console.error('Error fetching image:', error);
                    jsonPre.textContent = "Error: " + error.message + "\n\nMake sure api/index.php exists and returns valid JSON.";
                    imageContent.innerHTML = '<div class="loading-text">Error: Unable to load data from API</div>';
                });
        }

        // Handle submit button click
        document.querySelector('.get-image').addEventListener('click', function (e) {
            e.preventDefault();
            getImage();
        });

        // Mobile menu toggle
        document.querySelector('.mobile-menu').addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector('.vertical-nav').classList.toggle('active');
        });

        // Close menu when clicking nav links on mobile
        document.querySelectorAll('.vertical-nav ul a').forEach(link => {
            link.addEventListener('click', function () {
                document.querySelector('.vertical-nav').classList.remove('active');
            });
        });

        // Load initial image when page loads
        document.addEventListener('DOMContentLoaded', function () {
            getImage();
        });
    </script>

    <!-- Default Statcounter code for Roadside America (Site) https://roadside-america.dumbprojects.com/ -->
    <script>
        var sc_project = 12101527;
        var sc_invisible = 1;
        var sc_security = "93e2582a"; 
    </script>
    <script src="https://www.statcounter.com/counter/counter.js" async></script>
    <noscript>
        <div class="statcounter">
            <a title="Web Analytics Made Easy - StatCounter" href="https://statcounter.com/" target="_blank">
                <img class="statcounter" src="https://c.statcounter.com/12101527/0/93e2582a/1/"
                    alt="Web Analytics Made Easy - StatCounter">
            </a>
        </div>
    </noscript>
    <!-- End of Statcounter Code -->
</body>

</html>